% Created 2022-02-24 Thu 23:57
% Intended LaTeX compiler: pdflatex
\documentclass[11pt]{article}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{graphicx}
\usepackage{longtable}
\usepackage{wrapfig}
\usepackage{rotating}
\usepackage[normalem]{ulem}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{capt-of}
\usepackage{hyperref}
\author{Philippe Gabriel}
\date{\textit{<2022-01-27 Thu>}}
\title{IFT-1227 Demo 5}
\hypersetup{
 pdfauthor={Philippe Gabriel},
 pdftitle={IFT-1227 Demo 5},
 pdfkeywords={},
 pdfsubject={},
 pdfcreator={Emacs 28.0.01 (Org mode 9.5.2)}, 
 pdflang={English}}
\begin{document}

\maketitle
\tableofcontents


\section{Slide 5 - VHDL}
\label{sec:org9690aa5}

\begin{verbatim}

library IEEE;
use IEEE.STD_LOGIC_1164.all;

entity sillyfunction is
  port(a, b, c: in STD_LOGIC;
       y: out STD_LOGIC);
end;

architecture synth of sillyfunction is
begin
  y <= ((not a) and (not b) and (not c)) or
       (a and (not b) and (not c)) or
       (a and (not b) and c);
end;

\end{verbatim}

\begin{itemize}
\item Créer un nouveau projet - comme d'habitude
\item Problèmes possibles, 'entity undefined'
\begin{itemize}
\item Solution - Assignments \(\Rightarrow\) Settings \(\Rightarrow\) General - Choisir le nom de la fonction comme top-level
\end{itemize}
\end{itemize}

Ensuite possible de visionner le circuit avec les viewers comme avec les schémas - RTL Viewer

Testbench:

\begin{verbatim}

library IEEE;
use IEEE.STD_LOGIC_1164.all;

entity testbench1 is
end;

architecture sim of testbench1 is
  component sillyfunction
    port(a, b, c: in STD_LOGIC;
         y: out STD_LOGIC);
  end component;

  signal a, b, c, y: STD_LOGIC;
begin
  dut: sillyfunction port map(a, b, c, y); -- instantiate device under test

  process
  begin -- apply inputs one at a time
    a <= '0';
    b <= '0';
    c <= '0';
    wait for 10 ns;

    c <= '1';
    wait for 10 ns;

    b <= '1';
    c <= '0';
    wait for 10 ns;

    c <= '1';
    wait for 10 ns;

    a <= '1';
    b <= '0';
    c <= '0';
    wait for 10 ns;

    c <= '1';
    wait for 10 ns;

    b <= '1';
    c <= '0';
    wait for 10 ns;

    c <= '1';
    wait for 10 ns;

    wait; -- wait forever
  end process;
end;

\end{verbatim}

\subsection{ModelSim}
\label{sec:orgaf373b8}

Les guides se trouvent sur la page Studium, juste les suivre étape par étape

Quelques étapes importantes pour gnu/linux

Dans votre fichier \texttt{\textasciitilde{}/.profile}, ajouter ceci à la fin

\begin{verbatim}

exprrt MODELSIM_ROOTDIR="/home/phil-gab99/Packages/Quartus/altera/13.0sp1/modelsim_ase"
PATH="$PATH:$MODELSIM_ROOTDIR/bin"

\end{verbatim}

Erreurs que j'ai rencontré sur Ubuntu

library IEEE;
use IEEE.STD\textsubscript{LOGIC}\textsubscript{1164.all};

entity testbench1 is
end;

architecture sim of testbench1 is
  component sillyfunction
    port(a, b, c: in STD\textsubscript{LOGIC};
         y: out STD\textsubscript{LOGIC});
  end component;

  signal a, b, c, y: STD\textsubscript{LOGIC};
begin
  dut: sillyfunction port map(a, b, c, y); -- instantiate device under test

process
begin -- apply inputs one at a time
  a <= '0';
  b <= '0';
  c <= '0';
  wait for 10 ns;

c <= '1';
wait for 10 ns;

b <= '1';
c <= '0';
wait for 10 ns;

c <= '1';
wait for 10 ns;

a <= '1';
b <= '0';
c <= '0';
wait for 10 ns;

c <= '1';
wait for 10 ns;

b <= '1';
c <= '0';
wait for 10 ns;

c <= '1';
wait for 10 ns;

    wait; -- wait forever
  end process;
end;
\subsubsection{Problèmes distro-spécifique}
\label{sec:org5897676}

\texttt{Error: cannot find ./../linux\_rh60/vsim}
Fix
\begin{itemize}
\item Changer permissions du fichier \texttt{../vco} à \texttt{755}
\item Ouvrir le script \texttt{vsim} (en tant que super user) et modifier quelques lignes:
\begin{itemize}
\item \texttt{mode=\$\{MTI\_VCO\_MODE:-""\}} devient \texttt{mode=\$\{MTI\_VCO\_MODE:-"32"\}}
\item Le \texttt{case} étant la source de l'erreur, le cas défaut devrait être Linux et non Redhat
\end{itemize}
\end{itemize}

\begin{verbatim}

case $utype in
  2.4.[7-9]*)       vco="linux" ;;
  2.4.[1-9][0-9]*)  vco="linux" ;;
  2.[5-9]*)         vco="linux" ;;
  2.[1-9][0-9]*)    vco="linux" ;;
  3.[0-9]*)    		vco="linux" ;;
  *)                vco="linux" ;; # À la place de linux_rh60
esac

\end{verbatim}

\subsubsection{Problèmes de packages}
\label{sec:orgb5dba95}

\texttt{libXft.so.2: cannot open shared object file}

\begin{verbatim}

sudo apt install libxft2:i386

\end{verbatim}

\subsubsection{Autres problèmes}
\label{sec:org9318c29}

\texttt{** Fatal: Read failure in vlm process (0,0)}

Pas encore trouvé de fix

\url{https://profile.iiita.ac.in/bibhas.ghoshal/COA\_2020/Lab/ModelSim\%20Linux\%20installation.html}

\subsection{Windows}
\label{sec:org4598aaf}

Sur des machines Windows, il ne devrait pas y avoir de problèmes
Sur les machines du DIRO ça devrait être correct également
\end{document}