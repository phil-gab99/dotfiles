(in-package #:nyxt)

(defvar *my-blocked-hosts*
  (nyxt/blocker-mode:make-hostlist
   :hosts '("platform.twitter.com"
            "syndication.twitter.com"
            "m.media-amazon.com")))

(define-mode my-blocker-mode (nyxt/blocker-mode:blocker-mode)
  "Blocker mode with custom hosts from `*my-blocked-hosts*'."
  ((nyxt/blocker-mode:hostlists (list *my-blocked-hosts* nyxt/blocker-mode:*default-hostlist*))))

(define-configuration buffer
  ((default-modes (append '(my-blocker-mode) %slot-default%))))

(define-configuration nyxt/blocker-mode:blocker-mode
  ((nyxt/blocker-mode:hostlists
    (mapcar (lambda (h)
              ;; Update every minute
              (setf (nyxt/blocker-mode:update-interval h) 60))
            %slot-default%))))
