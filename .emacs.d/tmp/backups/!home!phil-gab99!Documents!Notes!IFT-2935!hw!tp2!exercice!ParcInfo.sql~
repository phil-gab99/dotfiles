/*
Vincent Falardeau 20170932
Philippe Gabriel 20120600
*/

BEGIN TRANSACTION;

DROP SCHEMA IF EXISTS parcinfo cascade;
CREATE SCHEMA parcinfo;
SET search_path TO parcinfo;

CREATE TABLE IF NOT EXISTS Segment (
    indIP INT PRIMARY KEY,
    nomSegment TEXT NOT NULL,
    etage INT
);

CREATE TABLE IF NOT EXISTS Salle (
    nSalle INT PRIMARY KEY,
    nomSalle TEXT NOT NULL,
    nbPoste INT,
    indIP INT
);

CREATE TABLE IF NOT EXISTS Poste (
    nPoste INT PRIMARY KEY,
    nomPoste TEXT NOT NULL,
    indIP INT,
    ad VARCHAR(3) CHECK (ad::INT BETWEEN 0 AND 255),
    typePoste TEXT,
    nSalle INT
);

CREATE TABLE IF NOT EXISTS Logiciel (
    nLog INT PRIMARY KEY,
    nomLog TEXT,
    dateAch DATE,
    version TEXT,
    typeLog TEXT,
    prix REAL CHECK (prix >= 0)
);

CREATE TABLE IF NOT EXISTS Installer (
    numIns SERIAL PRIMARY KEY,
    nPoste INT,
    nLog INT,
    dateIns TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    delai INT
);

CREATE TABLE IF NOT EXISTS Types (
    typeLP TEXT PRIMARY KEY,
    nomType TEXT
);

COMMIT;
