% Created 2022-03-25 Fri 20:07
% Intended LaTeX compiler: pdflatex
\documentclass[11pt]{article}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{graphicx}
\usepackage{longtable}
\usepackage{wrapfig}
\usepackage{rotating}
\usepackage[normalem]{ulem}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{capt-of}
\usepackage{hyperref}
\author{Vincent Falardeau (20170932) Philippe Gabriel (20120600)}
\date{2022-03-30 Mercredi}
\title{Exercice 4 - Bonus}
\hypersetup{
 pdfauthor={Vincent Falardeau (20170932) Philippe Gabriel (20120600)},
 pdftitle={Exercice 4 - Bonus},
 pdfkeywords={},
 pdfsubject={},
 pdfcreator={Emacs 28.0.91 (Org mode 9.5.2)}, 
 pdflang={English}}
\begin{document}

\maketitle

\section{Exercice 4 - Bonus}
\label{sec:orgb49cebb}

Soit la relation universelle suivante avec l'ensemble des DFs \(F\):\\

\textbf{Distribution} (Nom-Maison-Edition, Type-Journal, Code-Journal, Titre-Journal, Prix-Journal, N° Dépositaire, Nom-Dépositaire, Adresse-Dépositaire, Quantité livrée, N° Livreur, Nom-Livreur, Date-Livraison, Adresse-Maison-Edition)\\

\(F =\) \{Code-Journal \(\to\) Nom-Maison-Edition; Nom-Maison-Edition \(\to\) Type-Journal; Nom-Maison-Edition \(\to\) Adresse-Maison-Edition; Code-Journal \(\to\) Titre-Journal; Code-Journal \(\to\) Prix-Journal; Code-Journal \(\to\) Type-Journal; N° Dépositaire \(\to\) Adresse-Dépositaire; \uline{\textbf{Code-Journal, N° Dépositaire, N° Jour}} \(\to\) Qté-Journal\}\\

Questions:\\
\begin{enumerate}
\item En quelle forme normale est la relation Distribution?\\
Aucun des attributs présents ne semble être un attribut pouvant être exprimé sous forme de liste (i.e. aucune colonne n'est multivalulée) \(\to\) Donc la relation est au moins \(\texttt{1NF}\).\\
On remarque cependant qu'il existe des dépendances fonctionnelles dont le déterminé dépend fonctionnellement d'un déterminant qui ne s'agit que d'une partie de la clé (ex.: Code-Journal \(\to\) Nom-Maison-Edition, Code-Journal \(\to\) Titre-Journal,\ldots{}) \(\to\) Donc on constate que la relation n'est pas en \(\texttt{2NF}\) ni, en conséquence, en \(\texttt{3NF}\).\\
On conclut alors que la relation Distribution est en \(\texttt{1NF}\)\\

\item Donner une décomposition en 3ème forme normale de la relation Distribution.\\

\begin{itemize}
\item On commence par transformer la relation Distribution de \(\texttt{1NF}\) à \(\texttt{2NF}\)\\
\(D_1 =\) \{\textsubscript{Code}-Journal, N° Dépositaire, N° Jour\_, Qté-Journal\}\\
\(\mathcal F_1 =\) \{Code-Journal, N° Dépositaire, N° Jour \(\to\) Qté-Journal\}\\

\(D_2 =\) \{\textsubscript{N}° Dépositaire\_, Adresse-Dépositaire\}\\
\(\mathcal F_2 =\) \{N° Dépositaire \(\to\) Adresse-Dépositaire\}\\

\(D_3 =\) \{Code-Journal, Type-Journal, Titre-Journal, Prix-Journal, Nom-Maison-Edition, Adresse-Maison-Edition\}\\
\(\mathcal F_3 =\) \{\textsubscript{Code}-Journal\_ \(\to\) Type-Journal; \uline{Code-Journal} \(\to\) Titre-Journal; \uline{Code-Journal} \(\to\) Prix-Journal; \uline{Code-Journal} \(\to\) Nom-Maison-Edition; Nom-Maison-Edition \(\to\) Type-Journal; Nom-Maison-Edition \(\to\) Adresse-Maison-Edition;\}\\

Avec les trois relations ci-haut, on remarque qu'elles sont tous en \(\texttt{2NF}\) - Tout attribut non clé n'est pas en dépendance fonctionnelle d'une partie de clé.\\
\begin{itemize}
\item \(D_1\) contient une unique dépendance fonctionnelle dont le déterminé dépend fonctionnellement de la clé composée\\
\item \(D_2\) ne contient pas de clé composée\\
\item \(D_3\) ne contient pas de clé composée\\
\end{itemize}

\item On peut par la suite passer de à la transformation vers \(\texttt{3NF}\)\\
\begin{itemize}
\item Pour la relation \(D_1\), elle est en \(\texttt{2NF}\) et le seul déterminé de la dépendance fonctionnelle de cette relation dépend directement de la clé \(\to\) Donc elle est en \(\texttt{3NF}\)\\
\item Pour la relation \(D_2\), elle est en \(\texttt{2NF}\) et le seul déterminé de la dépendance fonctionnelle de cette relation dépend directement de la clé \(\to\) Donc elle est en \(\texttt{3NF}\)\\
\item Pour la relation \(D_3\), elle est en \(\texttt{2NF}\) par contre il existe des attributs non-clé qui ne dépendent pas directement de la clé \uline{Code-Journal} (ex.: Nom-Maison-Edition \(\to\) Type-Journal; Nom-Maison-Edition \(\to\) Adresse-Maison-Edition)\\

Avec l'algorithme de Bernstein, on peut transormer \(D_3\) en \(\texttt{3NF}\)\\
\begin{enumerate}
\item Initialiser \(P\) (ensemble de projection) à l'ensemble vide\\
\item Fixer \(\mathcal G\) une couverture miniale de \(\mathcal F_3\)\\
\begin{itemize}
\item On initialise \(\mathcal G = \mathcal F_3\)\\
\item La règle de décomposition n'est pas applicable car toutes les dépendances fonctionnelles ont un seul attribut du côté droit\\
\item Toutes les dépendances fonctionnelles sont élémentaires, elles ont toutes un seul attribut du côté gauche\\
\item On peut supprimer certaines redondances:\\
\begin{itemize}
\item \uline{Code-Journal} \(\to\) Type-Journal est redondante car si on enlève cette DF de \(\mathcal G\) pour obtenir \(\mathcal G'\), alors \((\text{Code-Journal})^+\) par rapport à \(\mathcal G'\) contient l'attribut Type-Journal\\
\item Il n'y a plus de dépendances fonctionnelles redondantes\\
\end{itemize}
\item On retourne donc \(\mathcal G'\)\\
\end{itemize}
\item Pour chaque déterminant distinct d'une partie gauche d'une dépendance fonctionnelle de la couverture minimale - On regroupe les attributs de droite et on rajoute à \(P\) la projection sur le déterminant ainsi que les attributs de droites\\
\begin{itemize}
\item Pour Code-Journal:\\
Code-Journal \(\to\) Titre-Journal, Prix-Journal, Nom-Maison-Edition\\
On rajoute donc à \(P\) la projection \(D_{31} =\) \{\textsubscript{Code}-Journal\_, Titre-Journal, Prix-Journal, Nom-Maison-Edition\}\\
\item Pour Nom-Maison-Edition:\\
Nom-Maison-Edition \(\to\) Type-Journal, Adresse-Maison-Edition\\
On rajoute donc à \(P\) la projection \(D_{32} =\) \{\textsubscript{Nom}-Maison-Edition\_, Type-Journal, Adresse-Maison-Edition\}\\
\end{itemize}
\item Puisque \(P\) contient une clé candidate de \(D_3\) (i.e. Code-Journal) on retourne \(P\)\\

On remarque que \(D_3\) équivaut à la jointure naturelle des projections obtenues\\
\end{enumerate}
\end{itemize}

La décomposition en \(\texttt{3NF}\) ainsi obtenue est:\\

\(D_1 =\) \{\textsubscript{Code}-Journal, N° Dépositaire, N° Jour\_, Qté-Journal\}\\
\(\mathcal F_1 =\) \{Code-Journal, N° Dépositaire, N° Jour \(\to\) Qté-Journal\}\\

\(D_2 =\) \{\textsubscript{N}° Dépositaire\_, Adresse-Dépositaire\}\\
\(\mathcal F_2 =\) \{N° Dépositaire \(\to\) Adresse-Dépositaire\}\\

\(D_{31} =\) \{\textsubscript{Code}-Journal\_, Titre-Journal, Prix-Journal, Nom-Maison-Edition\}\\
\(\mathcal F_{31} =\) \{Code-Journal \(\to\) Titre-Journal; Code-Journal \(\to\) Prix-Journal; Code-Journal \(\to\) Nom-Maison-Edition\}\\

\(D_{32} =\) \{\textsubscript{Nom}-Maison-Edition\_, Type-Journal, Adresse-Maison-Edition\}\\
\(F_{32} =\) \{Nom-Maison-Edition \(\to\) Type-Journal; Nom-Maison-Edition \(\to\) Adresse-Maison-Edition\}\\
\end{itemize}
\end{enumerate}
\end{document}