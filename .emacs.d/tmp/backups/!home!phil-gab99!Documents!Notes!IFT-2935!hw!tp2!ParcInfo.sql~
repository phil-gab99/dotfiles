BEGIN TRANSACTION;

CREATE TYPE INDIP_FORMAT AS (
    indIP1 INT,
    indIP2 INT,
    indIP3 INT
);

CREATE TABLE IF NOT EXISTS Segment (
    indIP INDIP_FORMAT PRIMARY KEY,
    nomSegment TEXT NOT NULL,
    etage INT
);

CREATE TABLE IF NOT EXISTS Salle (
    nSalle INT PRIMARY KEY,
    nomSalle TEXT NOT NULL,
    nbPoste INT,
    indIP INDIP_FORMAT
);

CREATE TABLE IF NOT EXISTS Poste (
    nPoste INT PRIMARY KEY,
    nomPoste TEXT NOT NULL,
    indIP INDIP_FORMAT,
    ad TEXT CHECK (CAST (ad AS INT) >= 0 AND CAST (ad AS INT) <= 255),
    typePoste TEXT,
    nSalle INT
);

CREATE TABLE IF NOT EXISTS Logiciel (
    nLog INT PRIMARY KEY,
    nomLog TEXT,
    dateAch DATE,
    version TEXT,
    typeLog TEXT,
    prix REAL CHECK (prix >= 0)
);

CREATE TABLE IF NOT EXISTS Installer (
    numIns SERIAL PRIMARY KEY,
    nPoste INT,
    nLog INT,
    dateIns TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    delai INT
);

CREATE TABLE IF NOT EXISTS Types (
    typeLP TEXT PRIMARY KEY,
    nomType TEXT
);

COMMIT;
